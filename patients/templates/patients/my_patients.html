{% extends "base.html" %}
{% block title %}–ú–æ–∏ –ø–∞—Ü–∏–µ–Ω—Ç—ã{% endblock %}
{% block content %}
<h2>–ú–æ–∏ –ø–∞—Ü–∏–µ–Ω—Ç—ã</h2>

<div class="card">
  <div class="card-title">{{ patient.full_name }}</div>
  <div class="card-text">–ü–æ–ª: {{ patient.get_gender_display }} | –í–æ–∑—Ä–∞—Å—Ç: {% if patient.birth_date %}{{ patient.get_age }}{% else %}?{% endif %}</div>
  <div class="card-text">–î–∏–∞–≥–Ω–æ–∑: {{ patient.diagnosis|truncatechars:50 }}</div>
  <div class="card-footer">
    <a href="{% url 'generate_recommendation' patient.id %}" class="btn btn-outline">–°–∫–∞—á–∞—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</a>
  </div>
</div>

<table border="1" cellpadding="10" cellspacing="0">
  <thead>
    <tr>
      <th>–§–ò–û</th>
      <th>–î–∏–∞–≥–Ω–æ–∑</th>
      <th>–ö–æ–Ω—Ç–∞–∫—Ç—ã</th>
      <th>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</th>
      <th>–î–µ–π—Å—Ç–≤–∏—è</th>
    </tr>
  </thead>
  <tbody>
    {% for patient in patients %}
    <tr>
      <td>{{ patient.full_name }}</td>
      <td>{{ patient.diagnosis|truncatechars:50 }}</td>
      <td>{{ patient.contact }}</td>
      <td>{{ patient.recommendations|truncatechars:50 }}</td>
      <td><a href="{% url 'generate_recommendation' patient.id %}" class="btn btn-success">üìÑ –ù–∞–ø–µ—á–∞—Ç–∞—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</a></td>
    </tr>
    {% empty %}
    <tr><td colspan="5" style="text-align:center;">–ù–µ—Ç –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤</td></tr>
    {% endfor %}
  </tbody>
</table>

<style>
.btn {
    padding: 8px 12px;
    text-decoration: none;
    color: white;
    border-radius: 5px;
}
.btn-success {
    background-color: #28a745;
}
.btn-success:hover {
    background-color: #218838;
}
table {
    width: 100%;
    border-collapse: collapse;
}
td, th {
    border: 1px solid #ccc;
    padding: 10px;
}
</style>

{% endblock %}