{% extends "base.html" %}
{% load static %}
{% block title %}–ü–µ—á–∞—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π{% endblock %}
{% block content %}

<h2>–ü–µ—á–∞—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π</h2>

<form method="get">
    {{ form.full_name.label_tag }} {{ form.full_name }}
    <button type="submit">üîç –ù–∞–π—Ç–∏</button>
</form>

<h3>–í—Å–µ –ø–∞—Ü–∏–µ–Ω—Ç—ã</h3>
<table border="1" cellpadding="10" cellspacing="0" style="width: 100%; border-collapse: collapse;">
    <thead>
        <tr style="background-color: #f9f9f9;">
            <th>–§–ò–û</th>
            <th>–î–∏–∞–≥–Ω–æ–∑</th>
            <th>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</th>
            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
        </tr>
    </thead>
    <tbody>
        {% for p in patients %}
        <tr>
            <td>{{ p.full_name }}</td>
            <td>{{ p.diagnosis|truncatewords:10 }}</td>
            <td>{{ p.recommendations|truncatewords:20 }}</td>
            <td>
                <a href="{% url 'generate_recommendation' patient_id=p.id %}" class="btn btn-success">üìÑ –ù–∞–ø–µ—á–∞—Ç–∞—Ç—å</a>
            </td>
        </tr>
        {% empty %}
        <tr><td colspan="4" align="center">–ù–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤</td></tr>
        {% endfor %}
    </tbody>
</table>

<h3>–ú–æ–∏ –ø–∞—Ü–∏–µ–Ω—Ç—ã</h3>
<table border="1" cellpadding="10" cellspacing="0" style="width: 100%; border-collapse: collapse;">
    <thead>
        <tr style="background-color: #f9f9f9;">
            <th>–§–ò–û</th>
            <th>–î–∏–∞–≥–Ω–æ–∑</th>
            <th>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</th>
            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
        </tr>
    </thead>
    <tbody>
        {% for p in patients_list %}
        <tr>
            <td>{{ p.full_name }}</td>
            <td>{{ p.diagnosis|truncatewords:10 }}</td>
            <td>{{ p.recommendations|truncatewords:20 }}</td>
            <td>
                <a href="{% url 'generate_recommendation' patient_id=p.id %}" class="btn btn-primary">üìÑ –ù–∞–ø–µ—á–∞—Ç–∞—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</a>
            </td>
        </tr>
        {% empty %}
        <tr><td colspan="4" align="center">–£ –≤–∞—Å –Ω–µ—Ç –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤</td></tr>
        {% endfor %}
    </tbody>
</table>

<style>
.btn {
    display: inline-block;
    padding: 8px 12px;
    color: white;
    text-decoration: none;
    border-radius: 4px;
}
.btn-success {
    background-color: #28a745;
}
.btn-primary {
    background-color: #007BFF;
}
.btn:hover {
    opacity: 0.9;
}
</style>

{% endblock %}